<div class="container mat-elevation-z8">
    <form class="form">
        <h1 class="fullWidth">Atualizar Viagem</h1>
        <div>
          <img
            class="fullWidth"
            src="assets/img/create/member-create.jpg"
            alt="Portal BDL" />
          </div>

          <section class="section">
            <mat-checkbox (change)="KmControl('0', $event.checked)" [checked]="kmcheio" color="primary" class="margin">
              KM CHEIO
            </mat-checkbox>          
            <mat-checkbox (change)="KmControl('1', $event.checked)" [checked]="meiokm" color="primary" class="margin">
              MEIO KM
            </mat-checkbox>
          </section>            

         <mat-form-field appearance="fill" class="midWidth">
          <mat-label>Data da Viagem</mat-label>
          <input matInput [matDatepicker]="travelDatePicker"             
            [formControl]="travelDateForm" 
            [value]="travelDateStart" 
            readonly    
            (dateChange)="addTravelDate($event.target.value)"/>
          <mat-datepicker-toggle
            matSuffix
            [for]="travelDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #travelDatePicker color="primary"></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="midWidth" appearance="legacy">
            <mat-label>Total de Km's Rodados</mat-label>
            <input 
              [(ngModel)]="travelControl.km"
              name="km"
              NumberOnly
              [formControl]="kmForm"
              required 
              matInput placeholder="Total de Km's Rodados"
              maxlength="20">
            <mat-icon matSuffix>pin</mat-icon>
            <mat-hint>20</mat-hint>
          </mat-form-field>  

        <mat-form-field class="midWidth" appearance="legacy">
            <mat-label>Local de Partida</mat-label>
            <input 
              [(ngModel)]="travelControl.departureLocation"
              name="departureLocation"
              [formControl]="departureLocationForm"
              required
              matInput placeholder="Local de Partida"
              maxlength="50">
            <mat-icon matSuffix>signpost</mat-icon>
            <mat-hint>50</mat-hint>
          </mat-form-field>  

        <mat-form-field class="midWidth" appearance="legacy">
            <mat-label>Local de Chegada</mat-label>
            <input 
              [(ngModel)]="travelControl.arrivalLocation"
              name="arrivalLocation"
              [formControl]="arrivalLocationform"
              required
              matInput placeholder="Local de Chegada"
              maxlength="80">
            <mat-icon matSuffix>signpost</mat-icon>
            <mat-hint>80</mat-hint>
          </mat-form-field>  

        <mat-form-field class="fullWidth" appearance="legacy">
            <mat-label>Descrição/Evento/Tipo de Viagem</mat-label>
            <input 
              [(ngModel)]="travelControl.description"
              name="description"
              [formControl]="descriptionForm"
              required
              matInput placeholder="Descrição/Evento/Tipo de Viagem"
              maxlength="99">
            <mat-icon matSuffix>description</mat-icon>
            <mat-hint>100</mat-hint>
          </mat-form-field>  

          <mat-form-field appearance="fill" class="morLessWidthBtn">
            <mat-label>Associado selecionado</mat-label>
            <input matInput placeholder="Associado não selecionado" 
              name="memberName"
              [formControl]="memberName"
              readonly/>
          </mat-form-field>

          <mat-form-field appearance="fill" class="midWidthWithButton">
            <mat-label>Sede selecionada</mat-label>
            <input matInput placeholder="Sede não selecionada" 
              name="headQuarter"
              [formControl]="headQuarter"
              readonly/>
          </mat-form-field>            
          
          <button mat-mini-fab  class="clearButton mat-elevation-z8" 
                    color="warn" aria-label="limpar"
                    mat-raised-button
                    matTooltip="Limpar Associado"
                    aria-label="Limpar Associado"
                    (click)="clearMember()">                    
                    <mat-icon>clear</mat-icon>
          </button>

          <mat-form-field appearance="standard" class="fullWidth">
            <mat-label>Pesquisar Associado</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Nome/SobreNome/Apelido" #input>
            <mat-icon matSuffix>search</mat-icon>            
          </mat-form-field>          

          <div class=" container-list mat-elevation-z8">
            <table mat-table [dataSource]="dataSource">  
              <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef> id </th>
                <td mat-cell *matCellDef="let element">{{element.id}}</td>
              </ng-container>      
              
              <ng-container matColumnDef="firstName">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td mat-cell *matCellDef="let element">{{element.firstName}}</td>
              </ng-container>      
            
              <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef>Sobre Nome</th>
                <td mat-cell *matCellDef="let element">{{element.lastName}}</td>
              </ng-container>      
              
              <ng-container matColumnDef="nickName">
                <th mat-header-cell *matHeaderCellDef> Apelido </th>
                <td mat-cell *matCellDef="let element"> 
                 {{element.nickName}}</td>
              </ng-container>
    
              <ng-container matColumnDef="headQuarter">
                <th mat-header-cell *matHeaderCellDef> Sede </th>
                <td mat-cell *matCellDef="let element"> {{element.headQuarter.description}} </td>
              </ng-container>
    
              <ng-container matColumnDef="acoes">
                <th  mat-header-cell *matHeaderCellDef> Ações </th>
                <td  mat-cell *matCellDef="let element"> 
                  <div >
                    <button  mat-mini-fab 
                      class="mat-elevation-z8" placeholder="Selecionar"
                      color="success" aria-label="Selecionar"
                      (click)="selectMember(element.id, element.firstName +' - ' + element.lastName
                      , element.headQuarter.description)" >
                      <mat-icon mat-raised-button
                      matTooltip="Selecionar este Associado"
                      aria-label="Selecionar Associado" >done_outline</mat-icon>
                    </button>
                  </div>                   
                  
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          
            <mat-paginator [pageSizeOptions]="[5, 10, 50]"
                           showFirstLastButtons 
                           aria-label="Select page of periodic elements">
            </mat-paginator>
          </div>  
          <button [disabled]="!validaCampos()"
            class="button mat-elevation-z10" mat-raised-button color="success"
            mat-raised-button
            matTooltip="Salvar Viagem"
            aria-label="Salvar Viagem"
            (click)="update()">Atualizar
          </button>
          <button routerLink="../../" class="button mat-elevation-z10" 
            mat-flat-button color="warn"
            mat-raised-button
            matTooltip="Cancelar"
            aria-label="Cancelar" >Cancelar
          </button>
    </form>
</div>