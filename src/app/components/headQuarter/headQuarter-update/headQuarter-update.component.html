<div class="container mat-elevation-z8">
    <form class="form">
        <h1 class="fullWidth">Atualizar Sede</h1>
        <img class="fullWidth" src="assets/img/create/address-create.svg" alt="Portal BDL">

        <mat-form-field class="fullWidth" appearance="legacy">
            <mat-label>Descrição</mat-label>
                <input 
                [(ngModel)]="headQuarter.description"
                name="description"
                [formControl]="description"
                required
                matInput placeholder="Descrição da sede..."
                maxlength="99">
            <mat-icon matSuffix>signpost</mat-icon>
            <mat-hint>100</mat-hint>
          </mat-form-field>    
          
          <mat-form-field appearance="fill" class="fullWidth">
            <mat-label>Logradouro selecionado</mat-label>
            <input matInput placeholder="Logradouro não selecionado" 
            name="addressLogradouro"
            [formControl]="addressLogradouro"
            readonly />
          </mat-form-field>

          <mat-form-field appearance="fill" class="midWidth">
            <mat-label>Cidade selecionada</mat-label>
            <input matInput placeholder="Cidade não selecionada" 
            name="cityName"
            [formControl]="cityName"
            readonly 
            />
          </mat-form-field>

          <mat-form-field appearance="fill" class="midWidth">
            <mat-label>CEP selecionado</mat-label>
            <input matInput placeholder="CEP não selecionado" 
            name="addressPostCode"
            [formControl]="addressPostCode" readonly/>
          </mat-form-field>    
          
          <button mat-mini-fab  class="clearButton mat-elevation-z8" 
                    color="warn" aria-label="limpar"
                    mat-raised-button
                    matTooltip="Limpar Endereço"
                    aria-label="Limpar Endereço"
                    (click)="clearAddress()">                    
                    <mat-icon>clear</mat-icon>
          </button>

          <mat-form-field appearance="standard" class="morLessWidth">
            <mat-label>Pesquisar Endereço</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Rua/Cidade/CEP" #input>
            <mat-icon matSuffix>search</mat-icon>            
          </mat-form-field>

          <button mat-mini-fab  class="addButton mat-elevation-z8" 
                    color="success" aria-label="Adicionar"
                    mat-raised-button
                    matTooltip="Ir para Cadastro de Endereço"
                    aria-label="Cadastro Endereço"
                    routerLink="../../address/create">                    
                    <mat-icon>library_add</mat-icon>
          </button>

          <div class=" container-list mat-elevation-z8">
            <table mat-table [dataSource]="dataSource">  
              <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef> id </th>
                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
              </ng-container>      
              
              <ng-container matColumnDef="logradouro">
                <th mat-header-cell *matHeaderCellDef> Logradouro </th>
                <td mat-cell *matCellDef="let element"> {{element.logradouro}} </td>
              </ng-container>      
            
              <ng-container matColumnDef="number">
                <th mat-header-cell *matHeaderCellDef> Numero </th>
                <td mat-cell *matCellDef="let element"> {{element.number}} </td>
              </ng-container>      
              
              <ng-container matColumnDef="city">
                <th mat-header-cell *matHeaderCellDef> Cidade </th>
                <td mat-cell *matCellDef="let element"> 
                  {{element.city.name}} - {{element.city.uf.acronym}} - {{element.city.uf.country.name}}</td>
              </ng-container>
    
              <ng-container matColumnDef="cep">
                <th mat-header-cell *matHeaderCellDef> CEP </th>
                <td mat-cell *matCellDef="let element"> {{element.postCode}} </td>
              </ng-container>
    
              <ng-container matColumnDef="acoes">
                <th  mat-header-cell *matHeaderCellDef> Ações </th>
                <td  mat-cell *matCellDef="let element"> 
                  <div >
                    <button  mat-mini-fab 
                    class="mat-elevation-z8" placeholder="Selecionar"
                    color="success" aria-label="Selecionar"
                    (click)="selectAddress(element.id, element.logradouro +' - ' + element.number
                    , element.city.name + ' - '+ element.city.uf.acronym + ' - '+ element.city.uf.country.name
                    , element.postCode)" >
                      <mat-icon mat-raised-button
                      matTooltip="Selecionar este Endereço"
                      aria-label="Selecionar Endereço" >done_outline</mat-icon>
                    </button>
                  </div>                   
                  
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          
            <mat-paginator [pageSizeOptions]="[5, 10, 50]"
                           showFirstLastButtons 
                           aria-label="Select page of periodic elements">
            </mat-paginator>
          </div>            
        
          <button [disabled]="!validaCampos()"
          class="button mat-elevation-z10" mat-raised-button color="success"
           (click)="update()">Atualizar</button>
          <button routerLink="../../" class="button mat-elevation-z10" 
          mat-flat-button color="warn">Cancelar</button>
    </form>
</div>