<div class="container mat-elevation-z8">
    <form class="form">
        <h1 class="fullWidth">Atualizar Advertência</h1>
        <img class="fullWidth" src="assets/img/create/address-create.svg" alt="Portal BDL">

        <section class="section" >
          <mat-checkbox  (change)="infractionType($event.checked, 'ESCRITA')" class="margin" color="primary"  [checked]="escrita">
            Escrita</mat-checkbox>
          <mat-checkbox  (change)="infractionType($event.checked, 'SUSPENSAO')" class="margin" color="primary" [checked]="suspensao">
            Suspensão</mat-checkbox> 
          <mat-checkbox  (change)="infractionType($event.checked, 'VERBAL')"  class="margin" color="primary" [checked]="verbal">
            Verbal</mat-checkbox>
          <mat-checkbox (change)="infractionType($event.checked, 'DESLIGAMENTO')" class="margin" color="primary" [checked]="desligamento">
            Desligamento</mat-checkbox>
          <mat-checkbox (change)="infractionType($event.checked, 'REBAIXAMENTO')" class="margin" color="primary" [checked]="rebaixamento">
            Rebaixamento</mat-checkbox>            
          <mat-checkbox (change)="infractionType($event.checked, 'EXPULSAO')" class="margin" color="primary" [checked]="expulsao">
            Expulsão</mat-checkbox>
         </section>

         <mat-form-field appearance="fill">
          <mat-label>Data da Advertência</mat-label>
          <input name="infractionDate" matInput required
          [value]="infractionDateStart"
          readonly  
          [matDatepicker]="infractionDatePicker"             
          [formControl]="infractionDateForm"
          (dateChange)="addInfractionDate( $event.target.value)" />
          <mat-datepicker-toggle
            matSuffix
            [for]="$any(infractionDatePicker)"></mat-datepicker-toggle>
          <mat-datepicker #infractionDatePicker color="primary"></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="fullWidth" appearance="legacy">
            <mat-label>Descrição</mat-label>
            <input 
            [(ngModel)]="infraction.description"
            name="description"
            [formControl]="description"
            required
             matInput placeholder="Descrição da Advertência"
             maxlength="99">
            <mat-icon matSuffix>description</mat-icon>
            <mat-hint>100</mat-hint>
          </mat-form-field>  

          <mat-form-field appearance="fill" class="midWidth">
            <mat-label>Associado selecionado</mat-label>
            <input matInput placeholder="Associado não selecionado" 
            name="memberName"
            [formControl]="memberName"
            readonly />
          </mat-form-field>

          <mat-form-field appearance="fill" class="midWidth">
            <mat-label>Sede selecionada</mat-label>
            <input matInput placeholder="Sede não selecionada" 
            name="headQuarter"
            [formControl]="headQuarter"
            readonly/>
          </mat-form-field>            
          
          <button mat-mini-fab  class="clearButton mat-elevation-z8" 
                    color="warn" aria-label="limpar"
                    mat-raised-button
                    matTooltip="Limpar Endereço"
                    aria-label="Limpar Endereço"
                    (click)="clearMember()">                    
                    <mat-icon>clear</mat-icon>
          </button>

          <mat-form-field appearance="standard" class="fullWidth">
            <mat-label>Pesquisar Associado</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Nome/SobreNome/Apelido" #input>
            <mat-icon matSuffix>search</mat-icon>            
          </mat-form-field>          

          <div class=" container-list mat-elevation-z8">
            <table mat-table [dataSource]="dataSource">  
              <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef> id </th>
                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
              </ng-container>      
              
              <ng-container matColumnDef="firstName">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
              </ng-container>      
            
              <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef> Sobre Nome </th>
                <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
              </ng-container>      
              
              <ng-container matColumnDef="nickName">
                <th mat-header-cell *matHeaderCellDef> Apelido </th>
                <td mat-cell *matCellDef="let element"> 
                 {{element.nickName}}</td>
              </ng-container>
    
              <ng-container matColumnDef="headQuarter">
                <th mat-header-cell *matHeaderCellDef> Sede </th>
                <td mat-cell *matCellDef="let element"> {{element.headQuarter.description}} </td>
              </ng-container>
    
              <ng-container matColumnDef="acoes">
                <th  mat-header-cell *matHeaderCellDef> Ações </th>
                <td  mat-cell *matCellDef="let element"> 
                  <div >
                    <button  mat-mini-fab 
                    class="mat-elevation-z8" placeholder="Selecionar"
                    color="success" aria-label="Selecionar"
                    (click)="selectMember(element.id, element.firstName +' - ' + element.lastName
                    , element.headQuarter.description)" >
                      <mat-icon mat-raised-button
                      matTooltip="Selecionar este Associado"
                      aria-label="Selecionar Associado" >done_outline</mat-icon>
                    </button>
                  </div>                   
                  
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          
            <mat-paginator [pageSizeOptions]="[5, 10, 50]"
                           showFirstLastButtons 
                           aria-label="Select page of periodic elements">
            </mat-paginator>
          </div> 

          <button [disabled]="!validaCampos()"
          class="button mat-elevation-z10" mat-raised-button color="success"
          mat-raised-button
            matTooltip="Salvar Advertência"
            aria-label="Salvar Advertência"
           (click)="update()">Atualizar</button>

          <button routerLink="../../" class="button mat-elevation-z10" 
          mat-flat-button color="warn"
          mat-raised-button
            matTooltip="Cancelar"
            aria-label="Cancelar" >Cancelar</button>
    </form>
</div>